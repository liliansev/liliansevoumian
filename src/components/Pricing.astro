---
import { Icon } from 'astro-icon/components';
import CTAButton from './ui/CTAButton.astro';

const plans = [
  {
    name: "Coaching",
    price: "200 €",
    description: "1 heure en visio pour débloquer un problème, valider une architecture ou monter en compétence.",
    features: [
      "Session de 60 min en visio",
      "Réponses claires et concrètes",
      "Recommandations personnalisées",
      "Replay disponible"
    ],
    cta: "Réserver une session",
    href: "https://cal.com/lilian-sevoumian/coaching-1"
  },
  {
    name: "Audit",
    price: "500 €",
    description: "Analyse complète de vos processus avec axes d'amélioration concrets et priorisés.",
    features: [
      "Analyse de vos workflows",
      "Document de restitution",
      "Plan d'action priorisé",
      "Livré sous 48h"
    ],
    cta: "Demander un audit",
    href: "https://cal.com/lilian-sevoumian/audit",
    featured: true
  },
  {
    name: "Projet sur-mesure",
    price: "À partir de 1 500 €",
    description: "Construction complète de vos automatisations avec formation et support inclus.",
    features: [
      "Développement sur-mesure",
      "Tests et ajustements",
      "Documentation complète",
      "Formation équipe incluse"
    ],
    cta: "Discuter de mon projet",
    href: "https://cal.com/lilian-sevoumian/prise-de-brief"
  }
];
---

<section id="tarifs" class="py-24 px-6 bg-zinc-50">
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="mb-16">
      <h2 class="fluid-h1 font-semibold text-zinc-900 mb-4">
        Tarifs
      </h2>
      <p class="text-zinc-600 font-light fluid-text-xl leading-relaxed">
        Des formules claires, adaptées à vos besoins.
      </p>
    </div>

    <!-- Pricing Cards -->
    <div class="grid md:grid-cols-3 gap-6">
      {plans.map((plan) => (
        <div class={`relative p-8 bg-white rounded-xl transition-all ${plan.featured ? 'shadow-lg pricing-featured' : 'border border-zinc-200 card-interactive'}`}>
          {plan.featured && (
            <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-zinc-900 text-white text-xs font-medium uppercase tracking-wider rounded-full z-10">
              Populaire
            </div>
          )}

          <!-- Plan Name -->
          <h3 class="fluid-h4 font-semibold text-zinc-900 mb-2">
            {plan.name}
          </h3>

          <!-- Price -->
          <div class="mb-4 whitespace-nowrap">
            <span class="fluid-h4 font-semibold text-zinc-900">
              {plan.price}
            </span>
            <span class="text-xs text-zinc-500 ml-1">ht</span>
          </div>

          <!-- Description -->
          <p class="fluid-text-sm text-zinc-600 leading-relaxed mb-6">
            {plan.description}
          </p>

          <!-- Features List -->
          <ul class="space-y-3 mb-8">
            {plan.features.map((feature) => (
              <li class="flex items-start gap-2.5 fluid-text-sm">
                <div class={`w-5 h-5 rounded-full flex items-center justify-center shrink-0 mt-0.5 ${plan.featured ? 'bg-zinc-900' : 'bg-zinc-100'}`}>
                  <Icon name="lucide:check" class={`w-3 h-3 ${plan.featured ? 'text-white' : 'text-zinc-600'}`} />
                </div>
                <span class="text-zinc-600">{feature}</span>
              </li>
            ))}
          </ul>

          <!-- CTA -->
          <CTAButton
            href={plan.href}
            text={plan.cta}
            variant={plan.featured ? 'primary' : 'secondary'}
            size="md"
            fullWidth={true}
          />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .pricing-featured {
    position: relative;
    background: white;
    border-radius: 0.75rem;
    /* Fallback border for browsers without @property support (Firefox) */
    border: 1px solid #a1a1aa;
  }

  /* Hide fallback border when animation works */
  @supports (background: paint(something)) {
    .pricing-featured {
      border: none;
    }
  }

  .pricing-featured::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    padding: 1px;
    pointer-events: none;
    background: linear-gradient(
      var(--gradient-angle, 0deg),
      #18181b,
      #a1a1aa,
      #18181b
    );
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    animation: rotate-gradient 4s linear infinite;
  }

  @keyframes rotate-gradient {
    0% {
      --gradient-angle: 0deg;
    }
    100% {
      --gradient-angle: 360deg;
    }
  }

  @property --gradient-angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
  }
</style>
