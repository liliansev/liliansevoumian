---
import { Icon } from 'astro-icon/components';

// Ligne 1 - Automatisation & No-Code
const row1 = [
  { name: "Zapier", icon: "simple-icons:zapier" },
  { name: "Airtable", icon: "simple-icons:airtable" },
  { name: "Notion", icon: "simple-icons:notion" },
  { name: "ClickUp", icon: "simple-icons:clickup" },
  { name: "Asana", icon: "simple-icons:asana" },
  { name: "Trello", icon: "simple-icons:trello" },
  { name: "Webflow", icon: "simple-icons:webflow" },
  { name: "Todoist", icon: "simple-icons:todoist" },
  { name: "Miro", icon: "simple-icons:miro" },
];

// Ligne 2 - Communication & CRM (17 outils)
const row2 = [
  { name: "Slack", icon: "simple-icons:slack" },
  { name: "Discord", icon: "simple-icons:discord" },
  { name: "Gmail", icon: "simple-icons:gmail" },
  { name: "HubSpot", icon: "simple-icons:hubspot" },
  { name: "Salesforce", icon: "simple-icons:salesforce" },
  { name: "Zendesk", icon: "simple-icons:zendesk" },
  { name: "Intercom", icon: "simple-icons:intercom" },
  { name: "Typeform", icon: "simple-icons:typeform" },
  { name: "Calendly", icon: "simple-icons:calendly" },
  { name: "Zoom", icon: "simple-icons:zoom" },
  { name: "Mailchimp", icon: "simple-icons:mailchimp" },
  { name: "Telegram", icon: "simple-icons:telegram" },
  { name: "WhatsApp", icon: "simple-icons:whatsapp" },
  { name: "Messenger", icon: "simple-icons:messenger" },
  { name: "Google Calendar", icon: "simple-icons:googlecalendar" },
  { name: "LinkedIn", icon: "simple-icons:linkedin" },
  { name: "Brevo", icon: "simple-icons:brevo" },
];

// Ligne 3 - Paiement, Cloud & AI (17 outils)
const row3 = [
  { name: "Stripe", icon: "simple-icons:stripe" },
  { name: "PayPal", icon: "simple-icons:paypal" },
  { name: "Shopify", icon: "simple-icons:shopify" },
  { name: "WooCommerce", icon: "simple-icons:woocommerce" },
  { name: "Google Sheets", icon: "simple-icons:googlesheets" },
  { name: "Google Drive", icon: "simple-icons:googledrive" },
  { name: "Dropbox", icon: "simple-icons:dropbox" },
  { name: "AWS", icon: "simple-icons:amazonaws" },
  { name: "OpenAI", icon: "simple-icons:openai" },
  { name: "Anthropic", icon: "simple-icons:anthropic" },
  { name: "Vercel", icon: "simple-icons:vercel" },
  { name: "GitHub", icon: "simple-icons:github" },
  { name: "Twilio", icon: "simple-icons:twilio" },
  { name: "Linear", icon: "simple-icons:linear" },
  { name: "Loom", icon: "simple-icons:loom" },
  { name: "Notion", icon: "simple-icons:notion" },
  { name: "Bitly", icon: "simple-icons:bitly" },
];

// Tous les outils pour mobile (une seule ligne)
const allTools = [...row1, ...row2, ...row3];

const gapSize = 48;
---

<section class="py-16 md:py-20 bg-zinc-900 overflow-hidden">
  <p class="text-center text-sm text-zinc-400 mb-6 md:mb-8 px-6">
    Vous utilisez ces outils ? Je peux les automatiser.
  </p>

  <!-- Mobile: 1 seule ligne -->
  <div class="md:hidden relative">
    <div class="absolute left-0 top-0 bottom-0 w-16 md:w-24 bg-gradient-to-r from-zinc-900 to-transparent z-10 pointer-events-none"></div>
    <div class="absolute right-0 top-0 bottom-0 w-16 md:w-24 bg-gradient-to-l from-zinc-900 to-transparent z-10 pointer-events-none"></div>

    <div class="flex overflow-hidden">
      <div class="flex items-center shrink-0 animate-scroll-left-mobile" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`}>
        {allTools.map((tool) => (
          <div class="flex items-center gap-2 shrink-0 text-zinc-300 whitespace-nowrap">
            <Icon name={tool.icon} class="w-5 h-5" />
            <span class="text-sm font-medium">{tool.name}</span>
          </div>
        ))}
      </div>
      <div class="flex items-center shrink-0 animate-scroll-left-mobile" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`} aria-hidden="true">
        {allTools.map((tool) => (
          <div class="flex items-center gap-2 shrink-0 text-zinc-300 whitespace-nowrap">
            <Icon name={tool.icon} class="w-5 h-5" />
            <span class="text-sm font-medium">{tool.name}</span>
          </div>
        ))}
      </div>
    </div>
  </div>

  <!-- Desktop: 3 lignes -->
  <div class="hidden md:block space-y-4">
    <!-- Ligne 1 - Gauche -->
    <div class="relative">
      <div class="absolute left-0 top-0 bottom-0 w-40 bg-gradient-to-r from-zinc-900 to-transparent z-10 pointer-events-none"></div>
      <div class="absolute right-0 top-0 bottom-0 w-40 bg-gradient-to-l from-zinc-900 to-transparent z-10 pointer-events-none"></div>

      <div class="flex overflow-hidden">
        <div class="flex items-center shrink-0 animate-scroll-left" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`}>
          {row1.map((tool) => (
            <div class="flex items-center gap-2 shrink-0 text-zinc-300 hover:text-zinc-200 transition-colors whitespace-nowrap">
              <Icon name={tool.icon} class="w-6 h-6" />
              <span class="text-sm font-medium">{tool.name}</span>
            </div>
          ))}
        </div>
        <div class="flex items-center shrink-0 animate-scroll-left" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`} aria-hidden="true">
          {row1.map((tool) => (
            <div class="flex items-center gap-2 shrink-0 text-zinc-300 hover:text-zinc-200 transition-colors whitespace-nowrap">
              <Icon name={tool.icon} class="w-6 h-6" />
              <span class="text-sm font-medium">{tool.name}</span>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Ligne 2 - Droite -->
    <div class="relative">
      <div class="absolute left-0 top-0 bottom-0 w-40 bg-gradient-to-r from-zinc-900 to-transparent z-10 pointer-events-none"></div>
      <div class="absolute right-0 top-0 bottom-0 w-40 bg-gradient-to-l from-zinc-900 to-transparent z-10 pointer-events-none"></div>

      <div class="flex overflow-hidden">
        <div class="flex items-center shrink-0 animate-scroll-right" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`}>
          {row2.map((tool) => (
            <div class="flex items-center gap-2 shrink-0 text-zinc-300 hover:text-zinc-200 transition-colors whitespace-nowrap">
              <Icon name={tool.icon} class="w-6 h-6" />
              <span class="text-sm font-medium">{tool.name}</span>
            </div>
          ))}
        </div>
        <div class="flex items-center shrink-0 animate-scroll-right" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`} aria-hidden="true">
          {row2.map((tool) => (
            <div class="flex items-center gap-2 shrink-0 text-zinc-300 hover:text-zinc-200 transition-colors whitespace-nowrap">
              <Icon name={tool.icon} class="w-6 h-6" />
              <span class="text-sm font-medium">{tool.name}</span>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Ligne 3 - Gauche -->
    <div class="relative">
      <div class="absolute left-0 top-0 bottom-0 w-40 bg-gradient-to-r from-zinc-900 to-transparent z-10 pointer-events-none"></div>
      <div class="absolute right-0 top-0 bottom-0 w-40 bg-gradient-to-l from-zinc-900 to-transparent z-10 pointer-events-none"></div>

      <div class="flex overflow-hidden">
        <div class="flex items-center shrink-0 animate-scroll-left-slow" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`}>
          {row3.map((tool) => (
            <div class="flex items-center gap-2 shrink-0 text-zinc-300 hover:text-zinc-200 transition-colors whitespace-nowrap">
              <Icon name={tool.icon} class="w-6 h-6" />
              <span class="text-sm font-medium">{tool.name}</span>
            </div>
          ))}
        </div>
        <div class="flex items-center shrink-0 animate-scroll-left-slow" style={`gap: ${gapSize}px; padding-right: ${gapSize}px;`} aria-hidden="true">
          {row3.map((tool) => (
            <div class="flex items-center gap-2 shrink-0 text-zinc-300 hover:text-zinc-200 transition-colors whitespace-nowrap">
              <Icon name={tool.icon} class="w-6 h-6" />
              <span class="text-sm font-medium">{tool.name}</span>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Keyframes defined in global.css */
  .animate-scroll-left {
    animation: scroll-left 70s linear infinite;
  }

  .animate-scroll-right {
    animation: scroll-right 80s linear infinite;
  }

  .animate-scroll-left-slow {
    animation: scroll-left 90s linear infinite;
  }

  .animate-scroll-left-mobile {
    animation: scroll-left 120s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-scroll-left,
    .animate-scroll-right,
    .animate-scroll-left-slow,
    .animate-scroll-left-mobile {
      animation: none;
    }
  }
</style>
