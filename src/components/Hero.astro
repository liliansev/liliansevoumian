---
import { Icon } from 'astro-icon/components';
import HeroIllustration from './ui/HeroIllustration.astro';
import CTAButton from './ui/CTAButton.astro';

const techBadges = [
  { name: "Make", icon: "simple-icons:make" },
  { name: "n8n", icon: "simple-icons:n8n" },
  { name: "Airtable", icon: "simple-icons:airtable" }
];
---

<section class="overflow-hidden pt-24 pb-16 md:pt-48 md:pb-32 px-6 relative">
  <!-- Grid pattern background -->
  <div class="absolute inset-0 hero-grid-pattern pointer-events-none"></div>

  <!-- Background decorations -->
  <div class="absolute -top-24 -right-24 w-96 h-96 bg-purple-200/30 rounded-full blur-3xl opacity-50 pointer-events-none"></div>
  <div class="absolute -bottom-24 -left-24 w-96 h-96 bg-indigo-200/30 rounded-full blur-3xl opacity-50 pointer-events-none"></div>

  <div class="grid xl:grid-cols-2 gap-12 xl:gap-16 max-w-7xl mx-auto items-center">
    <!-- Content -->
    <div class="z-10 relative space-y-8 min-w-0">
      <!-- Headline -->
      <h1 class="fluid-h0 font-semibold text-zinc-900 leading-[1.1]">
        Expert IA &<br />Automations<br /><span class="text-zinc-500 whitespace-nowrap">Make & n8n</span>
      </h1>

      <!-- Subheadline -->
      <p class="hero-subtitle text-zinc-700 font-light leading-relaxed">
        5 ans d'expertise sur <strong class="text-zinc-700 font-medium">Make</strong>, <strong class="text-zinc-700 font-medium">n8n</strong> et <strong class="text-zinc-700 font-medium">Airtable</strong>.<br />+2 000 heures économisées pour mes clients.
      </p>

      <!-- CTA Block - aligned elements -->
      <div class="pt-4 space-y-4 max-w-full">
        <div id="hero-cta">
          <CTAButton
            href="https://cal.com/lilian-sevoumian/prise-de-brief"
            text="Lancer mon projet"
            size="lg"
          />
        </div>

        <!-- Social proof -->
        <div class="flex items-center justify-between md:justify-start md:gap-6 text-sm text-zinc-700">
          <div class="flex items-center gap-1">
            <Icon name="lucide:users" class="w-4 h-4" />
            <span><strong class="text-zinc-700">100+</strong> clients</span>
          </div>
          <span class="text-zinc-400">•</span>
          <div class="flex items-center gap-1">
            <Icon name="lucide:graduation-cap" class="w-4 h-4" />
            <span><strong class="text-zinc-700">300+</strong> formés</span>
          </div>
        </div>

        <!-- Tech badges -->
        <div class="pt-2 flex items-center justify-between md:justify-start md:gap-8 text-zinc-500">
          {techBadges.map((badge) => (
            <div class="flex items-center gap-2 py-2">
              <Icon name={badge.icon} class="w-5 h-5" />
              <span class="text-xs font-semibold uppercase tracking-wide">{badge.name}</span>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Illustration with parallax -->
    <div class="relative xl:h-full flex items-center justify-center xl:justify-end">
      <div class="relative w-full max-w-xl parallax-container" data-parallax>
        <HeroIllustration />
      </div>
    </div>
  </div>
</section>

<style>
  .hero-subtitle {
    font-size: var(--fluid-text-xl);
    max-width: var(--fluid-prose-xl);
  }

  .hero-grid-pattern {
    background-image:
      linear-gradient(to right, rgb(228 228 231 / 0.5) 1px, transparent 1px),
      linear-gradient(to bottom, rgb(228 228 231 / 0.5) 1px, transparent 1px);
    background-size: 80px 80px;
    -webkit-mask-image: radial-gradient(
      ellipse 50% 70% at 25% 50%,
      transparent 0%,
      black 100%
    );
    mask-image: radial-gradient(
      ellipse 50% 70% at 25% 50%,
      transparent 0%,
      black 100%
    );
  }
</style>

<script>
  // Subtle parallax effect on scroll
  const parallaxElement = document.querySelector('[data-parallax]');

  if (parallaxElement && window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
    let ticking = false;

    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const scrollY = window.scrollY;
          const translateY = scrollY * 0.08; // Subtle movement
          (parallaxElement as HTMLElement).style.transform = `translateY(${translateY}px)`;
          ticking = false;
        });
        ticking = true;
      }
    }, { passive: true });
  }
</script>
