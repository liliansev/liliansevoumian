---
import { Icon } from 'astro-icon/components';
import HeroIllustration from './ui/HeroIllustration.astro';

const techBadges = [
  { name: "Make", icon: "simple-icons:make", href: "https://www.make.com" },
  { name: "n8n", icon: "simple-icons:n8n", href: "https://n8n.io" },
  { name: "Airtable", icon: "simple-icons:airtable", href: "https://airtable.com" }
];
---

<section class="overflow-hidden pt-32 pb-20 md:pt-48 md:pb-32 px-6 relative">
  <!-- Background decorations -->
  <div class="absolute -top-24 -right-24 w-96 h-96 bg-purple-200/30 rounded-full blur-3xl opacity-50 pointer-events-none"></div>
  <div class="absolute -bottom-24 -left-24 w-96 h-96 bg-indigo-200/30 rounded-full blur-3xl opacity-50 pointer-events-none"></div>

  <div class="grid xl:grid-cols-2 gap-12 xl:gap-16 max-w-7xl mx-auto items-center">
    <!-- Content -->
    <div class="z-10 relative space-y-8">
      <!-- Headline -->
      <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-semibold text-zinc-900 tracking-tight leading-[1.1]">
        Expert IA & Automatisations<br /><span class="text-zinc-400">via Make & n8n.</span>
      </h1>

      <!-- Subheadline -->
      <p class="hero-subtitle text-zinc-500 font-light leading-relaxed">
        5 ans d'expertise sur <strong class="text-zinc-700 font-medium">Make</strong>, <strong class="text-zinc-700 font-medium">n8n</strong> et <strong class="text-zinc-700 font-medium">Airtable</strong>.<br />+2 000 heures économisées pour mes clients.
      </p>

      <!-- CTA Block - aligned elements -->
      <div class="pt-4 space-y-4 max-w-md">
        <a
          href="https://cal.com/lilian-sevoumian/prise-de-brief"
          class="w-full inline-flex items-center justify-center gap-3 px-6 py-4 bg-zinc-900 text-white text-sm font-medium rounded shadow-lg shadow-zinc-300 hover:shadow-xl hover:shadow-zinc-400/50 hover:-translate-y-0.5 transition-all"
        >
          Me confier votre projet
          <Icon name="lucide:arrow-right" class="w-4 h-4" />
        </a>

        <!-- Social proof -->
        <div class="flex items-center justify-between text-sm text-zinc-500">
          <div class="flex items-center gap-1">
            <Icon name="lucide:users" class="w-4 h-4" />
            <span><strong class="text-zinc-700">100+</strong> entreprises accompagnées</span>
          </div>
          <span class="text-zinc-300">•</span>
          <div class="flex items-center gap-1">
            <Icon name="lucide:graduation-cap" class="w-4 h-4" />
            <span><strong class="text-zinc-700">300+</strong> personnes formées</span>
          </div>
        </div>

        <!-- Tech badges -->
        <div class="pt-2 flex items-center justify-between text-zinc-400">
          {techBadges.map((badge) => (
            <a href={badge.href} target="_blank" rel="noopener" class="flex items-center gap-2 hover:text-zinc-600 active:text-zinc-500 transition-colors py-2">
              <Icon name={badge.icon} class="w-5 h-5" />
              <span class="text-xs font-semibold uppercase tracking-wide">{badge.name}</span>
            </a>
          ))}
        </div>
      </div>
    </div>

    <!-- Illustration with parallax -->
    <div class="relative xl:h-full flex items-center justify-center xl:justify-end">
      <div class="relative w-full max-w-xl parallax-container" data-parallax>
        <HeroIllustration />
      </div>
    </div>
  </div>
</section>

<style>
  .hero-subtitle {
    /* Fluid typography: scales from 1rem (16px) to 1.25rem (20px) */
    font-size: clamp(1rem, 0.5rem + 2vw, 1.25rem);
    /* Fluid max-width: scales based on viewport */
    max-width: clamp(18rem, 85vw, 32rem);
  }
</style>

<script>
  // Subtle parallax effect on scroll
  const parallaxElement = document.querySelector('[data-parallax]');

  if (parallaxElement && window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
    let ticking = false;

    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const scrollY = window.scrollY;
          const translateY = scrollY * 0.08; // Subtle movement
          (parallaxElement as HTMLElement).style.transform = `translateY(${translateY}px)`;
          ticking = false;
        });
        ticking = true;
      }
    });
  }
</script>
